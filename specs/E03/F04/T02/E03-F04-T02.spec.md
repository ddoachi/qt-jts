# Spec: E03-F04-T02 - Create Broker Configuration UI

---
# ============================================================================
# SPEC METADATA
# ============================================================================

# === IDENTIFICATION ===
id: E03-F04-T02
clickup_task_id: '86ew01zzz'
title: Create Broker Configuration UI
type: task

# === HIERARCHY ===
parent: E03-F04
children: []
epic: E03
feature: F04
task: T02
domain: broker

# === WORKFLOW ===
status: draft
priority: medium

# === TRACKING ===
created: '2025-12-28'
updated: '2025-12-28'
due_date: ''
estimated_hours: 8
actual_hours: 0

# === METADATA ===
tags:
  - ui
  - qt
  - configuration
  - dialog
effort: large
risk: low
---

**Status**: Draft
**Type**: Task
**Parent**: E03-F04
**Created**: 2025-12-28
**Updated**: 2025-12-28

## Executive Summary

Create a Qt-based configuration dialog for managing broker connections: add/edit/remove broker configurations, manage accounts per broker, display connection status, and test connections.

## Execution Flow

```
1. Create BrokerConfigDialog
   → Main dialog with broker list
   → Add/Close buttons
2. Create BrokerListWidget
   → Display all brokers with status
   → Action buttons per broker
3. Create BrokerEditDialog
   → Form for broker settings
   → Type, host, port, rate limit
4. Create AccountDialog
   → Form for account settings
   → ID, name, type, default
   → Return: SUCCESS with UI ready
```

## User Stories

### Primary User Story
**As a** user
**I want to** configure my brokers via UI
**So that** I can manage connections easily

## Acceptance Scenarios

### Scenario 1: Add Broker
**Given** config dialog open
**When** Add Broker is clicked and form filled
**Then** new broker appears in list

### Scenario 2: Test Connection
**Given** configured broker
**When** Test Connection is clicked
**Then** connection status is shown

### Scenario 3: Add Account
**Given** broker with no accounts
**When** Add Account is clicked
**Then** account appears under broker

## Requirements

### Functional Requirements
- **FR-001**: Display all configured brokers
- **FR-002**: Add new broker configuration
- **FR-003**: Edit/remove existing brokers
- **FR-004**: Manage accounts per broker

### Non-Functional Requirements
- **NFR-001**: Responsive UI
- **NFR-002**: Korean text support (UTF-8)

### Technical Constraints
- **TC-001**: Use PySide6/Qt
- **TC-002**: Modal dialogs

## Dependencies

### Upstream Dependencies
- [ ] E03-F04-T01: BrokerRegistry
- [ ] E01: Qt framework

### Downstream Impact
- [ ] Settings saved to config

## Gate Checks

### Pre-Implementation Gates
- [x] Registry implemented (T01)
- [x] Qt framework available

### Quality Gates
- [ ] UI integration tests
- [ ] Manual QA testing

## Success Criteria

### Acceptance Criteria
- [ ] All dialogs working
- [ ] Korean text displays
- [ ] Connection test works

### Definition of Done
- [ ] Code reviewed
- [ ] Manual testing complete

## Artifacts

### Input Documents
- [Parent Feature](../E03-F04.spec.md)

### Output Artifacts
- `src/ui/dialogs/broker_config_dialog.py`
- `src/ui/dialogs/broker_edit_dialog.py`
- `src/ui/dialogs/account_dialog.py`
- `src/ui/widgets/broker_list_widget.py`

---
*Template Version: 2.0.0 - Enhanced with Speckit features*
