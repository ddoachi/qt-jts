# Spec: E03-F05-T02 - Create BrokerStatusWidget

---
# ============================================================================
# SPEC METADATA
# ============================================================================

# === IDENTIFICATION ===
id: E03-F05-T02
clickup_task_id: '86ew0200c'
title: Create BrokerStatusWidget
type: task

# === HIERARCHY ===
parent: E03-F05
children: []
epic: E03
feature: F05
task: T02
domain: broker

# === WORKFLOW ===
status: draft
priority: medium

# === TRACKING ===
created: '2025-12-28'
updated: '2025-12-28'
due_date: ''
estimated_hours: 6
actual_hours: 0

# === METADATA ===
tags:
  - ui
  - widget
  - status
  - broker
effort: large
risk: low
---

**Status**: Draft
**Type**: Task
**Parent**: E03-F05
**Created**: 2025-12-28
**Updated**: 2025-12-28

## Executive Summary

Create a comprehensive Qt widget for displaying broker status: connection status indicator, account list with balances, embedded rate limit indicator, and quick actions (refresh, settings).

## Execution Flow

```
1. Create BrokerStatusWidget (QFrame)
   → Header with broker name and status
   → Account section with balances
   → Embedded RateLimitIndicator
2. Create ConnectionStatusIndicator
   → Colored dot with status text
   → Connected/Connecting/Disconnected/Error
3. Create AccountItemWidget
   → Account ID, name, balance display
   → Default account indicator (★)
4. Add actions
   → Refresh, Settings buttons
   → Return: SUCCESS with widget ready
```

## User Stories

### Primary User Story
**As a** user
**I want to** see broker status at a glance
**So that** I can monitor connections and balances

## Acceptance Scenarios

### Scenario 1: Connected Broker
**Given** connected broker
**When** widget displays
**Then** shows green dot "Connected"

### Scenario 2: Account Balances
**Given** broker with 2 accounts
**When** widget displays
**Then** both accounts show with ₩ balances

### Scenario 3: Refresh Action
**Given** displayed broker
**When** refresh button clicked
**Then** balances are updated

## Requirements

### Functional Requirements
- **FR-001**: Show broker name and type
- **FR-002**: Connection status indicator
- **FR-003**: Account list with balances
- **FR-004**: Embedded rate limit indicator

### Non-Functional Requirements
- **NFR-001**: Responsive layout
- **NFR-002**: Korean text support

### Technical Constraints
- **TC-001**: Use PySide6/Qt
- **TC-002**: Currency formatting (₩)

## Dependencies

### Upstream Dependencies
- [ ] E03-F04-T01: BrokerRegistry data
- [ ] E03-F05-T01: RateLimitIndicator

### Downstream Impact
- [ ] Dashboard uses this widget

## Gate Checks

### Pre-Implementation Gates
- [x] Registry ready (F04-T01)
- [x] Rate indicator ready (T01)

### Quality Gates
- [ ] Widget tests
- [ ] Layout tests

## Success Criteria

### Acceptance Criteria
- [ ] Status displays correctly
- [ ] Accounts show balances
- [ ] Actions work

### Definition of Done
- [ ] Code reviewed
- [ ] Tests passing

## Artifacts

### Input Documents
- [Parent Feature](../E03-F05.spec.md)

### Output Artifacts
- `src/ui/widgets/broker_status_widget.py`
- `src/ui/widgets/account_item_widget.py`
- `src/ui/widgets/connection_status_indicator.py`

---
*Template Version: 2.0.0 - Enhanced with Speckit features*
