---
# ============================================================================
# SPEC METADATA
# ============================================================================

# === IDENTIFICATION ===
id: E07-F04-T01
clickup_task_id: '86ew020rz'
title: Create ScannerView Main Layout
type: task

# === HIERARCHY ===
parent: E07-F04
children: []
epic: E07
feature: F04
task: T01
domain: scanner

# === WORKFLOW ===
status: draft
priority: high

# === TRACKING ===
created: '2025-12-28'
updated: '2025-12-28'
due_date: ''
estimated_hours: 4
actual_hours: 0

# === METADATA ===
tags:
  - ui
  - layout
  - qt
effort: medium
risk: low
wave: 3
---

# Spec: E07-F04-T01 - Create ScannerView Main Layout

**Status**: Draft
**Type**: Task
**Parent**: [E07-F04](../E07-F04.spec.md)
**Created**: 2025-12-28
**Updated**: 2025-12-28

## Executive Summary

Create the main scanner view with 3-column resizable layout using QSplitter. Includes placeholder widgets for formula library, config/results, and chart/details that can be replaced with real widgets.

## Execution Flow

```
1. Create ScannerView class
   → Inherit from QWidget
   → Setup 3-column QSplitter layout

2. Create left panel (Formula Library)
   → Add placeholder frame
   → Set initial width 20%

3. Create center panel (Config + Results)
   → Create ScanConfigWidget with markets, timeframe, date range
   → Add placeholder for results table
   → Connect run button signal

4. Create right panel (Chart + Details)
   → Add placeholder for chart
   → Add placeholder for match details

5. Setup widget replacement methods
   → set_formula_library()
   → set_results_widget()
   → set_chart_preview()
   → set_match_details()
   → Return: SUCCESS with layout
```

## User Stories

### Primary User Story
**As a** trader
**I want to** see a well-organized scanner interface
**So that** I can efficiently scan and analyze results

## Acceptance Scenarios

### Scenario 1: 3-Column Layout
**Given** ScannerView is created
**When** displayed
**Then** 3 resizable columns are visible

### Scenario 2: Resize Columns
**Given** splitter is visible
**When** I drag splitter handles
**Then** columns resize proportionally

### Scenario 3: Replace Widget
**Given** placeholder in formula panel
**When** set_formula_library(widget) is called
**Then** placeholder is replaced with new widget

## Requirements

### Functional Requirements
- **FR-001**: MUST have 3-column QSplitter layout
- **FR-002**: MUST have ScanConfigWidget with markets, timeframe, date range
- **FR-003**: MUST emit scan_requested signal when run clicked
- **FR-004**: MUST support widget replacement for all panels

### Non-Functional Requirements
- **NFR-001**: Load in < 100ms
- **NFR-002**: 60 FPS during resize

### Technical Constraints
- **TC-001**: Use PySide6
- **TC-002**: Use QSplitter for resizable columns

## Key Entities

### Class: ScannerView
```python
class ScannerView(QWidget):
    scan_requested = Signal(object)
    formula_selected = Signal(object)
    match_selected = Signal(object)

    def set_formula_library(self, widget: QWidget) -> None
    def set_results_widget(self, widget: QWidget) -> None
    def set_chart_preview(self, widget: QWidget) -> None
    def set_match_details(self, widget: QWidget) -> None
```

### Class: ScanConfigWidget
```python
class ScanConfigWidget(QWidget):
    scan_requested = Signal(object)  # ScanConfig

    def _build_config(self) -> ScanConfig
    def set_enabled(self, enabled: bool) -> None
```

## Dependencies

### Upstream Dependencies
- [ ] E01: Application Framework

### Downstream Impact
- [ ] E07-F04-T02 through T05: Use this as container

## Gate Checks

### Pre-Implementation Gates
- [ ] E01 application framework available
- [ ] Qt6/PySide6 installed

### Quality Gates
- [ ] Layout renders correctly
- [ ] Widget replacement works
- [ ] Signal connections tested

## Success Criteria

### Acceptance Criteria
- [ ] 3-column layout works
- [ ] Columns are resizable
- [ ] Config widget has all controls
- [ ] Widget replacement works
- [ ] 80% test coverage

### Definition of Done
- [ ] Code reviewed
- [ ] UI tests passing
- [ ] Manual testing done

## Artifacts

### Input Documents
- [Feature Spec](../E07-F04.spec.md)

### Output Artifacts
- [ ] `src/presentation/views/scanner/scanner_view.py`
- [ ] `src/presentation/views/scanner/scan_config_widget.py`

---
*Template Version: 2.0.0*
