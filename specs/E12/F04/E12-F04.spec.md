# Spec: E12-F04 - UI Components

---
# ============================================================================
# SPEC METADATA
# ============================================================================

# === IDENTIFICATION ===
id: E12-F04
clickup_task_id: ''
title: UI Components
type: feature

# === HIERARCHY ===
parent: E12
children:
  - E12-F04-T01
  - E12-F04-T02
  - E12-F04-T03
  - E12-F04-T04
epic: E12
feature: F04
task: null
domain: paper-trading

# === WORKFLOW ===
status: draft
priority: high

# === TRACKING ===
created: '2025-12-30'
updated: '2025-12-30'
due_date: ''
estimated_hours: 20
actual_hours: 0

# === METADATA ===
tags:
  - ui
  - pyside6
  - widgets
  - paper-trading
effort: large
risk: low
---

**Status**: Draft
**Type**: Feature
**Parent**: E12
**Created**: 2025-12-30
**Updated**: 2025-12-30

## Executive Summary

Create the PySide6 UI components for paper trading: main `PaperTradingView` (orchestrates all widgets), `PortfolioWidget` (displays positions and P&L), `SignalsWidget` (shows signals with action buttons), and `SessionStatsWidget` (displays performance metrics). These components provide the user interface for paper trading sessions.

## Execution Flow

```
1. Create PaperTradingView
   → Main view with session controls
   → Layout for child widgets
   → Connect to engine signals
2. Create PortfolioWidget
   → Table display for positions
   → P&L color coding (green/red)
   → Total portfolio value display
3. Create SignalsWidget
   → List of trading signals
   → Execute/Reject action buttons
   → Status indicators
4. Create SessionStatsWidget
   → Win rate, total trades
   → Average trade return
   → Session duration
   → Return: SUCCESS with complete UI
```

## User Stories

### Primary User Story
**As a** trader
**I want to** see my paper trading session in a clear UI
**So that** I can monitor positions, signals, and performance

### Additional Stories
- **As a** trader, **I want to** see position P&L color-coded, **So that** I quickly see gains/losses
- **As a** trader, **I want to** execute signals with one click, **So that** I can act quickly
- **As a** trader, **I want to** see session statistics, **So that** I can evaluate strategy performance

## Acceptance Scenarios

### Scenario 1: Display Portfolio
**Given** virtual portfolio with 2 positions
**When** PortfolioWidget is rendered
**Then** both positions show with P&L and total value

### Scenario 2: Execute Signal
**Given** pending BUY signal displayed
**When** user clicks "실행" button
**Then** signal_executed event is emitted

### Scenario 3: Color-Coded P&L
**Given** position with positive unrealized P&L
**When** position row is rendered
**Then** P&L text is green

### Scenario 4: Session Stats
**Given** session with 12 trades, 8 wins
**When** SessionStatsWidget updates
**Then** shows "Win Rate: 66.7%"

## Requirements

### Functional Requirements
- **FR-001**: PaperTradingView with session controls and status
- **FR-002**: PortfolioWidget displays positions with P&L
- **FR-003**: SignalsWidget with execute/reject actions
- **FR-004**: SessionStatsWidget shows performance metrics

### Non-Functional Requirements
- **NFR-001**: UI updates within 100ms of data change
- **NFR-002**: Responsive layout for different window sizes
- **NFR-003**: Accessible color coding (not only color-dependent)

### Technical Constraints
- **TC-001**: PySide6 for Qt bindings
- **TC-002**: Signal/Slot for event handling
- **TC-003**: Follow existing UI patterns from E01

## Key Components

### Component: PaperTradingView
- **Description**: Main view orchestrating paper trading UI
- **Responsibilities**: Session control, widget layout, engine connection
- **Signals**: session_started, session_stopped, session_paused

### Component: PortfolioWidget
- **Description**: Displays virtual portfolio and positions
- **Responsibilities**: Position table, P&L display, selection handling
- **Signals**: position_selected(symbol)

### Component: SignalsWidget
- **Description**: Lists and manages trading signals
- **Responsibilities**: Signal display, action buttons, status updates
- **Signals**: signal_executed(TradingSignal), signal_rejected(TradingSignal)

### Component: SessionStatsWidget
- **Description**: Displays session performance statistics
- **Responsibilities**: Win rate, trade count, average return
- **Signals**: None (display only)

## Dependencies

### Upstream Dependencies
- [ ] E01: UI framework and patterns
- [ ] E12-F01: Domain entities for display
- [ ] E12-F02: Engine for data and actions

### Downstream Impact
- None (end-user facing)

## Gate Checks

### Pre-Implementation Gates
- [x] E01 UI patterns available
- [x] Widget design finalized (PRD 5.7.2)
- [x] Color coding decisions made

### Quality Gates
- [ ] Visual review with mock data
- [ ] User interaction tests
- [ ] Test coverage > 80%

## Tasks Preview

| ID | Title | Effort | Wave | Dependencies |
|----|-------|--------|------|--------------|
| [E12-F04-T01](T01/E12-F04-T01.spec.md) | Create PaperTradingView | L | 1 | E01 |
| [E12-F04-T02](T02/E12-F04-T02.spec.md) | Create PortfolioWidget | M | 2 | T01 |
| [E12-F04-T03](T03/E12-F04-T03.spec.md) | Create SignalsWidget | M | 2 | T01 |
| [E12-F04-T04](T04/E12-F04-T04.spec.md) | Create SessionStatsWidget | M | 2 | T01 |

**Wave Dependencies**: T01 → (T02, T03, T04 parallel)

## Success Criteria

### Acceptance Criteria
- [ ] All widgets implemented and functional
- [ ] P&L color coding works correctly
- [ ] Signal actions emit correct events
- [ ] Stats display correctly

### Definition of Done
- [ ] Code reviewed and approved
- [ ] Visual review passed
- [ ] Unit tests passing
- [ ] Documentation updated

## Risk Assessment

| Risk | Probability | Impact | Mitigation |
|------|-------------|--------|------------|
| UI responsiveness issues | Low | Medium | Proper threading for updates |
| Layout issues on resize | Low | Low | Responsive layout testing |

## Notes and Clarifications

### Decisions Made
- 2025-12-30: Use QTableWidget for positions
- 2025-12-30: Use QListWidget with custom items for signals
- 2025-12-30: Green for gains, red for losses

## Artifacts

### Input Documents
- [Parent Epic](../E12.spec.md)
- [E01](../../E01/E01.spec.md) - UI Framework
- PRD Section 5.7.2

### Output Artifacts
- [ ] `E12-F04.pre-docs.md` - Pre-implementation documentation
- [ ] `E12-F04.post-docs.md` - Post-implementation learnings

## References

- PRD Section 5.7: Paper Trading
- E01: UI Framework
- PySide6 documentation

---
*Template Version: 2.0.0 - Enhanced with Speckit features*
