# Spec: E12-F04-T04 - Create SessionStatsWidget

---
# ============================================================================
# SPEC METADATA
# ============================================================================

# === IDENTIFICATION ===
id: E12-F04-T04
clickup_task_id: ''
title: Create SessionStatsWidget
type: task

# === HIERARCHY ===
parent: E12-F04
children: []
epic: E12
feature: F04
task: T04
domain: paper-trading

# === WORKFLOW ===
status: draft
priority: medium

# === TRACKING ===
created: '2025-12-30'
updated: '2025-12-30'
due_date: ''
estimated_hours: 4
actual_hours: 0

# === METADATA ===
tags:
  - ui
  - widget
  - statistics
  - performance
effort: medium
risk: low
---

**Status**: Draft
**Type**: Task
**Parent**: E12-F04
**Created**: 2025-12-30
**Updated**: 2025-12-30

## Executive Summary

Create `SessionStatsWidget` that displays paper trading session performance statistics. Shows total trades, win rate, and average trade return. Provides quick overview of strategy performance during the session.

## Execution Flow

```
1. Create widget class
   → Inherit from QWidget
   → Define stat labels
2. Setup UI components
   → Vertical layout with stat lines
   → Tree-style formatting
3. Implement set_stats method
   → Update Total Trades
   → Calculate and display Win Rate
   → Calculate and display Avg Trade
4. Calculate statistics
   → Win rate = wins / total * 100
   → Avg trade = sum(pnl_pct) / total
   → Return: SUCCESS with widget working
```

## User Stories

### Primary User Story
**As a** trader
**I want to** see session performance stats
**So that** I can evaluate my strategy effectiveness

## Acceptance Scenarios

### Scenario 1: Display Total Trades
**Given** session with 12 executed trades
**Then** shows "├─ Total Trades: 12"

### Scenario 2: Display Win Rate
**Given** 8 winning trades out of 12
**Then** shows "├─ Win Rate: 66.7%"

### Scenario 3: Display Average Trade
**Given** average return +0.8%
**Then** shows "└─ Avg Trade: +0.8%"

### Scenario 4: Zero Trades
**Given** no trades yet
**Then** shows appropriate defaults (0 trades, N/A rates)

## Requirements

### Functional Requirements
- **FR-001**: Display total trades count
- **FR-002**: Calculate and display win rate
- **FR-003**: Calculate and display average trade return
- **FR-004**: Handle zero trades gracefully

### Non-Functional Requirements
- **NFR-001**: Clear number formatting
- **NFR-002**: Tree-style visual layout

### Technical Constraints
- **TC-001**: PySide6 QWidget
- **TC-002**: Label-based display

## Dependencies

### Upstream Dependencies
- [ ] E12-F04-T01: Parent view
- [ ] E12-F05-T02: Trade history for stats

### Downstream Impact
- None (display only)

## Gate Checks

### Pre-Implementation Gates
- [x] Parent view implemented
- [x] Stat calculations defined

### Quality Gates
- [ ] Visual review
- [ ] Test coverage > 80%

## Success Criteria

### Acceptance Criteria
- [ ] Stats display correctly
- [ ] Calculations accurate
- [ ] Edge cases handled
- [ ] Visual formatting correct

### Definition of Done
- [ ] Code reviewed
- [ ] Visual review passed
- [ ] Documentation complete

## Artifacts

### Input Documents
- [Parent Feature](../E12-F04.spec.md)

### Output Artifacts
- `src/presentation/views/paper_trading/session_stats_widget.py`

---
*Template Version: 2.0.0 - Enhanced with Speckit features*
