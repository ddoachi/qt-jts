# Spec: E12-F01-T01 - Define Session Entities

---
# ============================================================================
# SPEC METADATA
# ============================================================================

# === IDENTIFICATION ===
id: E12-F01-T01
clickup_task_id: '86ew0fpg0'
title: Define Session Entities (PaperTradingSession, SessionConfig)
type: task

# === HIERARCHY ===
parent: E12-F01
children: []
epic: E12
feature: F01
task: T01
domain: paper-trading

# === WORKFLOW ===
status: draft
priority: high

# === TRACKING ===
created: '2025-12-30'
updated: '2025-12-30'
due_date: ''
estimated_hours: 4
actual_hours: 0

# === METADATA ===
tags:
  - domain
  - entities
  - session
  - dataclass
effort: medium
risk: low
---

**Status**: Draft
**Type**: Task
**Parent**: E12-F01
**Created**: 2025-12-30
**Updated**: 2025-12-30

## Executive Summary

Create the `PaperTradingSession` and `SessionConfig` dataclasses along with `SessionStatus` enum. These entities manage the paper trading session lifecycle including status tracking, strategy configuration, and virtual capital allocation.

## Execution Flow

```
1. Create SessionStatus enum
   → PENDING, RUNNING, PAUSED, STOPPED states
2. Create SessionConfig dataclass
   → Strategy reference, data source broker
   → Symbols list, virtual capital
   → Optional duration_days
3. Create PaperTradingSession dataclass
   → Unique id (UUID)
   → Strategy, data_source, symbols
   → virtual_capital, status
   → Timestamps (started_at, stopped_at, created_at)
   → Return: SUCCESS with session entities defined
```

## User Stories

### Primary User Story
**As a** developer
**I want to** use type-safe session entities
**So that** I can manage paper trading session state reliably

## Acceptance Scenarios

### Scenario 1: Create Session
**Given** session configuration
**When** PaperTradingSession is created
**Then** session has unique ID and PENDING status

### Scenario 2: Session Status Transitions
**Given** session in PENDING state
**When** started
**Then** status transitions to RUNNING with started_at timestamp

### Scenario 3: Default Virtual Capital
**Given** SessionConfig without capital specified
**When** config is created
**Then** virtual_capital defaults to 100,000,000 (1억원)

## Requirements

### Functional Requirements
- **FR-001**: SessionStatus enum with PENDING, RUNNING, PAUSED, STOPPED
- **FR-002**: SessionConfig with strategy, symbols, virtual_capital
- **FR-003**: PaperTradingSession with complete lifecycle fields

### Non-Functional Requirements
- **NFR-001**: Use Decimal for virtual_capital
- **NFR-002**: Use UUID for session id
- **NFR-003**: Type hints on all fields

### Technical Constraints
- **TC-001**: Python dataclasses
- **TC-002**: Decimal for financial values

## Dependencies

### Upstream Dependencies
- [ ] E09: Strategy entity reference
- [ ] E03: BrokerConfig for data_source

### Downstream Impact
- [ ] E12-F01-T02: Portfolio references session_id
- [ ] E12-F02: Engine uses these entities

## Gate Checks

### Pre-Implementation Gates
- [x] Session fields defined in PRD
- [x] Status states clear

### Quality Gates
- [ ] Unit tests for all entities
- [ ] Test coverage > 80%

## Success Criteria

### Acceptance Criteria
- [ ] All entities implemented
- [ ] Enum values complete
- [ ] Default values working
- [ ] Tests passing

### Definition of Done
- [ ] Code reviewed
- [ ] Unit tests passing
- [ ] Documentation complete

## Artifacts

### Input Documents
- [Parent Feature](../E12-F01.spec.md)

### Output Artifacts
- `src/domain/entities/paper_trading_session.py`
- `src/domain/entities/session_config.py`
- `src/domain/enums/session_status.py`

---
*Template Version: 2.0.0 - Enhanced with Speckit features*
