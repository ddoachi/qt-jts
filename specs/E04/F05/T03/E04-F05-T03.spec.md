---
# ============================================================================
# SPEC METADATA
# ============================================================================

# === IDENTIFICATION ===
id: E04-F05-T03
clickup_task_id: '86ew020dx'
title: Create DataManagementView
type: task

# === HIERARCHY ===
parent: E04-F05
children: []
epic: E04
feature: F05
task: T03
domain: data-collection

# === WORKFLOW ===
status: draft
priority: medium

# === TRACKING ===
created: '2025-01-15'
updated: '2025-01-15'
due_date: ''
estimated_hours: 8
actual_hours: 0

# === METADATA ===
tags: [ui, view, pyside6, table, data-management]
effort: large
risk: low
---

# Spec: E04-F05-T03 - Create DataManagementView

**Status**: Draft
**Type**: Task
**Parent**: E04-F05
**Created**: 2025-01-15
**Updated**: 2025-01-15

## Executive Summary

Create the Qt/PySide6 view for browsing and managing downloaded historical data. This view provides filtering, sorting, validation status indicators, and export functionality for collected data.

## Execution Flow

```
1. Initialize view with data service
   → Setup table model with proxy for sorting
   → Configure filter bar
   → Setup summary bar

2. Load data coverage
   → Query service for coverage by timeframe/market
   → Populate table model
   → Update summary statistics

3. User applies filters
   → Filter by timeframe dropdown
   → Filter by market dropdown
   → Table updates immediately

4. User triggers actions
   → Validation button runs data validation
   → Export button shows format menu
   → Table rows show status icons
```

## User Stories

### Primary User Story
**As a** trader
**I want to** browse my downloaded data
**So that** I can see what's available and its quality

## Acceptance Scenarios

### Scenario 1: Table Display
**Given** 1000 symbols have data
**When** view is opened
**Then** table shows all symbols with coverage info

### Scenario 2: Filter by Market
**Given** table shows all markets
**When** KOSPI filter is selected
**Then** table shows only KOSPI symbols

### Scenario 3: Validation Status
**Given** symbol has data gaps
**When** displayed in table
**Then** status column shows warning icon

### Scenario 4: Export Trigger
**Given** view is displayed
**When** export button is clicked
**Then** export_requested signal emits format

## Requirements

### Functional Requirements
- **FR-001**: Table MUST display all downloaded data
- **FR-002**: Filters MUST work correctly
- **FR-003**: Sorting MUST work on all columns
- **FR-004**: Status icons MUST show correctly
- **FR-005**: Export MUST trigger signal with format

### Non-Functional Requirements
- **NFR-001**: Table loads < 1 second for 10,000 rows
- **NFR-002**: Filtering is immediate
- **NFR-003**: Export shows progress for large datasets

### Technical Constraints
- **TC-001**: Must use QTableView with QAbstractTableModel
- **TC-002**: Must use QSortFilterProxyModel for sorting/filtering
- **TC-003**: Must be testable with pytest-qt

## Key Entities

### Entity: DataManagementView
- **Key Attributes**: data_service
- **Signals**: validation_requested, export_requested(format)
- **Methods**: refresh()

### Entity: DataCoverageModel
- **Description**: QAbstractTableModel for data coverage
- **Columns**: Symbol, Name, From, To, Candles, Status

### Entity: DataCoverage
- **Key Attributes**: symbol_code, symbol_name, start_date, end_date, candle_count, has_gaps, has_anomalies

## Dependencies

### Upstream Dependencies
- [x] E04-F04: Data Validation (status display)
- [x] E04-F06: Data Export (export trigger)
- [x] E01: Application Framework

### Downstream Impact
- None (terminal view)

## Success Criteria

### Acceptance Criteria
- [ ] Table displays all downloaded data
- [ ] Filters work correctly
- [ ] Sorting works on all columns
- [ ] Status icons show correctly
- [ ] Export generates valid file

### Definition of Done
- [ ] Model unit tests
- [ ] View integration tests
- [ ] Export functionality tests
- [ ] Performance tested with large datasets

## Artifacts

### Output Files
```
src/presentation/views/
└── data_management_view.py

src/presentation/models/
└── data_coverage_model.py  # DataCoverageModel
```

---
*Template Version: 2.0.0 - Enhanced with Speckit features*
