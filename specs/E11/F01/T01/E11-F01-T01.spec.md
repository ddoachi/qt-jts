# Spec: E11-F01-T01 - ParameterRange and OptimizationTarget

---
# ============================================================================
# SPEC METADATA
# ============================================================================

# === IDENTIFICATION ===
id: E11-F01-T01
clickup_task_id: '86ew0fphx'
title: ParameterRange and OptimizationTarget
type: task

# === HIERARCHY ===
parent: E11-F01
children: []
epic: E11
feature: F01
task: T01
domain: optimization

# === WORKFLOW ===
status: draft
priority: high

# === TRACKING ===
created: '2025-12-30'
updated: '2025-12-30'
due_date: ''
estimated_hours: 2
actual_hours: 0

# === METADATA ===
tags: [domain-model, dataclass, parameter-range, enum]
effort: small
risk: low
wave: 1
parallel: true
---

**Status**: Draft
**Type**: Task
**Parent**: E11-F01 (Optimization Domain Models)
**Wave**: 1 (Can run in parallel)

## Executive Summary

Define the ParameterRange dataclass for specifying parameter min/max/step values and the OptimizationTarget enum for selecting which metric to optimize. ParameterRange includes a values() method to generate all values in the range and a num_values property for counting combinations.

## User Stories

**As a** developer
**I want to** define parameter ranges with min/max/step
**So that** I can generate all parameter combinations for optimization

## Acceptance Scenarios

### Scenario 1: Generate Parameter Values
**Given** ParameterRange(name="rsi_period", min_value=10, max_value=30, step=5)
**When** values() is called
**Then** it returns [10, 15, 20, 25, 30]

### Scenario 2: Count Values
**Given** ParameterRange with 5 values
**When** num_values is accessed
**Then** it returns 5

### Scenario 3: Optimization Targets
**Given** OptimizationTarget enum
**When** all values are listed
**Then** it includes SHARPE, TOTAL_RETURN, PROFIT_FACTOR, WIN_RATE, CALMAR

## Requirements

### Functional Requirements
- **FR-001**: ParameterRange MUST have name, min_value, max_value, step fields
- **FR-002**: ParameterRange.values() MUST generate list from min to max by step
- **FR-003**: ParameterRange.num_values MUST return count of generated values
- **FR-004**: OptimizationTarget MUST be an Enum with 5 target types

### Technical Constraints
- **TC-001**: Use @dataclass decorator
- **TC-002**: Use Enum for OptimizationTarget

## Implementation Details

### File Location
`src/domain/models/optimization.py`

### Code Structure
```python
from dataclasses import dataclass
from enum import Enum
from typing import Optional

class OptimizationTarget(Enum):
    SHARPE = "sharpe"
    TOTAL_RETURN = "total_return"
    PROFIT_FACTOR = "profit_factor"
    WIN_RATE = "win_rate"
    CALMAR = "calmar"

@dataclass
class ParameterRange:
    name: str
    min_value: float
    max_value: float
    step: float
    current_value: Optional[float] = None

    def values(self) -> list[float]:
        """Generate all values in range"""
        result = []
        current = self.min_value
        while current <= self.max_value + 1e-9:  # Handle float precision
            result.append(round(current, 10))
            current += self.step
        return result

    @property
    def num_values(self) -> int:
        return len(self.values())
```

## Dependencies

### Upstream
- None (foundational)

### Downstream
- E11-F01-T02: OptimizationConfig uses ParameterRange and OptimizationTarget

## Success Criteria

- [ ] ParameterRange dataclass defined with all fields
- [ ] values() correctly generates value list
- [ ] num_values property returns correct count
- [ ] OptimizationTarget enum has all 5 values
- [ ] Unit tests pass with 100% coverage

---
*Template Version: 2.0.0*
